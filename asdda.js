var Skins = {
    hornet: {
        or: {
            meta: "/566/70102/323/346/31033607367072/meta.info",
            lightmap: "/566/70102/323/346/31033607367072/lightmap.webp",
            object: "/566/70102/323/346/31033607367072/object.a3d"
        },
        pr: {
            meta: "/553/1466/317/276/31033607413764/meta.info",
            lightmap: "/553/1466/317/276/31033607413764/lightmap.webp",
            object: "/553/1466/317/276/31033607413764/object.a3d"
        },
        lc: {
            meta: "/551/32007/310/225/31033607400400/meta.info",
            lightmap: "/551/32007/310/225/31033607400400/lightmap.webp",
            object: "/551/32007/310/225/31033607400400/object.a3d"
        },
        ut: {
            meta: "/562/165115/303/236/31033610210055/meta.info",
            lightmap: "/562/165115/303/236/31033610210055/lightmap.webp",
            object: "/562/165115/303/236/31033610210055/object.a3d"
        },
        gt: {
            meta: "/605/27506/77/216/31033607347661/meta.info",
            lightmap: "/605/27506/77/216/31033607347661/lightmap.webp",
            object: "/605/27506/77/216/31033607347661/object.a3d",
            wheels: "/605/27506/77/216/31033607347661/wheels.webp"
        },
        xt: {
            meta: "/0/16722/6/305/31033607424605/meta.info",
            lightmap: "/0/16722/6/305/31033607424605/lightmap.webp",
            object: "/0/16722/6/305/31033607424605/object.a3d"
        }
    },
    wasp: {
        or: {
            meta: "/574/111243/33/322/31033607311775/meta.info",
            lightmap: "/574/111243/33/322/31033607311775/lightmap.webp",
            object: "/574/111243/33/322/31033607311775/object.a3d"
        },
        lc: {
            meta: "/577/171773/42/62/31033610115062/meta.info",
            lightmap: "/577/171773/42/62/31033610115062/lightmap.webp",
            object: "/577/171773/42/62/31033610115062/object.a3d"
        },
        xt: {
            meta: "/0/16722/167/77/31033610130736/meta.info",
            lightmap: "/0/16722/167/77/31033610130736/lightmap.webp",
            object: "/0/16722/167/77/31033610130736/object.a3d"
        }
    },
    railgun: {
        or: {
            meta: "/567/105205/202/122/31033604741475/meta.info",
            lightmap: "/567/105205/202/122/31033604741475/lightmap.webp",
            object: "/567/105205/202/122/31033604741475/object.a3d"
        },
        pr: {
            meta: "/553/116715/27/132/31033604752652/meta.info",
            lightmap: "/553/116715/27/132/31033604752652/lightmap.webp",
            object: "/553/116715/27/132/31033604752652/object.a3d"
        },
        lc: {
            meta: "/550/121443/145/146/31033604745456/meta.info",
            lightmap: "/550/121443/145/146/31033604745456/lightmap.webp",
            object: "/550/121443/145/146/31033604745456/object.a3d"
        },
        ut: {
            meta: "/556/177362/212/346/31033604754562/meta.info",
            lightmap: "/556/177362/212/346/31033604754562/lightmap.webp",
            object: "/556/177362/212/346/31033604754562/object.a3d"
        },
        gt: {
            meta: "/606/155010/245/142/31033604735353/meta.info",
            lightmap: "/606/155010/245/142/31033604735353/lightmap.webp",
            object: "/606/155010/245/142/31033604735353/object.a3d"
        },
        xt: {
            meta: "/0/16722/6/301/31033604764033/meta.info",
            lightmap: "/0/16722/6/301/31033604764033/lightmap.webp",
            object: "/0/16722/6/301/31033604764033/object.a3d"
        }
    }
};
if (navigator.platform.toLowerCase().includes('mac')) {
    Skins = {
        hornet: {
            or: {
                meta: "/566/70102/323/346/31033607367072/meta.info",
                lightmap: "/566/70102/323/346/31033607367072/lightmap-astc.ktx",
                object: "/566/70102/323/346/31033607367072/object.a3d"
            },
            pr: {
                meta: "/553/1466/317/276/31033607413764/meta.info",
                lightmap: "/553/1466/317/276/31033607413764/lightmap-astc.ktx",
                object: "/553/1466/317/276/31033607413764/object.a3d"
            },
            lc: {
                meta: "/551/32007/310/225/31033607400400/meta.info",
                lightmap: "/551/32007/310/225/31033607400400/lightmap-astc.ktx",
                object: "/551/32007/310/225/31033607400400/object.a3d"
            },
            ut: {
                meta: "/562/165115/303/236/31033610210055/meta.info",
                lightmap: "/562/165115/303/236/31033610210055/lightmap-astc.ktx",
                object: "/562/165115/303/236/31033610210055/object.a3d"
            },
            gt: {
                meta: "/605/27506/77/216/31033607347661/meta.info",
                lightmap: "/605/27506/77/216/31033607347661/lightmap-astc.ktx",
                object: "/605/27506/77/216/31033607347661/object.a3d",
                wheels: "/605/27506/77/216/31033607347661/wheels.webp"
            },
            xt: {
                meta: "/0/16722/6/305/31033607424605/meta.info",
                lightmap: "/0/16722/6/305/31033607424605/lightmap-astc.ktx",
                object: "/0/16722/6/305/31033607424605/object.a3d"
            }
        },
        wasp: {
            or: {
                meta: "/574/111243/33/322/31033607311775/meta.info",
                lightmap: "/574/111243/33/322/31033607311775/lightmap-astc.ktx",
                object: "/574/111243/33/322/31033607311775/object.a3d"
            },
            lc: {
                meta: "/577/171773/42/62/31033610115062/meta.info",
                lightmap: "/577/171773/42/62/31033610115062/lightmap-astc.ktx",
                object: "/577/171773/42/62/31033610115062/object.a3d"
            },
            xt: {
                meta: "/0/16722/167/77/31033610130736/meta.info",
                lightmap: "/0/16722/167/77/31033610130736/lightmap-astc.ktx",
                object: "/0/16722/167/77/31033610130736/object.a3d"
            }
        },
        railgun: {
            or: {
                meta: "/567/105205/202/122/31033604741475/meta.info",
                lightmap: "/567/105205/202/122/31033604741475/lightmap-astc.ktx",
                object: "/567/105205/202/122/31033604741475/object.a3d"
            },
            pr: {
                meta: "/553/116715/27/132/31033604752652/meta.info",
                lightmap: "/553/116715/27/132/31033604752652/lightmap-astc.ktx",
                object: "/553/116715/27/132/31033604752652/object.a3d"
            },
            lc: {
                meta: "/550/121443/145/146/31033604745456/meta.info",
                lightmap: "/550/121443/145/146/31033604745456/lightmap-astc.ktx",
                object: "/550/121443/145/146/31033604745456/object.a3d"
            },
            ut: {
                meta: "/556/177362/212/346/31033604754562/meta.info",
                lightmap: "/556/177362/212/346/31033604754562/lightmap-astc.ktx",
                object: "/556/177362/212/346/31033604754562/object.a3d"
            },
            gt: {
                meta: "/606/155010/245/142/31033604735353/meta.info",
                lightmap: "/606/155010/245/142/31033604735353/lightmap-astc.ktx",
                object: "/606/155010/245/142/31033604735353/object.a3d"
            },
            xt: {
                meta: "/0/16722/6/301/31033604764033/meta.info",
                lightmap: "/0/16722/6/301/31033604764033/lightmap-astc.ktx",
                object: "/0/16722/6/301/31033604764033/object.a3d"
            }
        }
    };
};
var SelectedTank = {
    turret: {},
    hull: {}
};
document.body.insertAdjacentHTML('beforeend', `
<div class='gui3'>
    <h1>SKIN SELECTION</h1>
    <div class="selection-container">
        <div class="selection-item">
            <label for="Turret">Turret:</label>
            <select name="Turret" id="Turret"></select>
        </div>
        <div class="selection-item">
            <label for="Hull">Hull:</label>
            <select name="Hull" id="Hull"></select>
        </div>
    </div>
</div>

<div class='gui2'>
    <div class="switch-group">
        <div class="switch-item">
            <input id='skin-check' class='hotkey' type='checkbox'>
            <label for='skin-check' class="slider"></label>
            <label for='skin-check' class="switch-label">XP XT's</label>
            <div class='info'>(XP XT's) Saves choice on refresh, client-sided only</div>
        </div>

        <div class="switch-item">
            <input id='esp-check' class='hotkey' type='checkbox'>
            <label for='esp-check' class="slider"></label>
            <label for='esp-check' class="switch-label">ESP</label>
        </div>

        <div class="switch-item">
            <input id='speed-check' class='hotkey' type='checkbox'>
            <label for='speed-check' class="slider"></label>
            <label for='speed-check' class="switch-label">Speed</label>
        </div>

        <div class="switch-item">
            <input id='aimbot' class='hotkey' type='checkbox' checked>
            <label for='aimbot' class="slider"></label>
            <label for='aimbot' class="switch-label">Aimbot</label>
        </div>
    </div>

    <div class="slider-controls">
        <div class="control-item">
            <label for="aim">Aim:</label>
            <input type='range' id="aim" min="0" max="360" value='4'>
            <output id="aim-output" contenteditable="true">4</output>
        </div>
        
        <div class="control-item">
            <label for="speed">Speed:</label>
            <input type='range' id="speed" min="0" max="100" value='1.13'>
            <output id="speed-output" contenteditable="true">1.13</output>
        </div>

        <div class="control-item">
            <label for="acceleration">Acceleration:</label>
            <input type='range' id="acceleration" min="0" max="100" value='1.15'>
            <output id="acceleration-output" contenteditable="true">1.15</output>
        </div>
    </div>
</div>

<style>
/* Dramatic Flowing Background */
.gui2, .gui3 {
    background: linear-gradient(45deg, #00ffae, #0099ff, #ff00ff, #ff9900);
    background-size: 300% 300%;
    animation: backgroundFlow 10s ease infinite;
    padding: 30px;
    border-radius: 30px;
    box-shadow: 0px 15px 40px rgba(0, 0, 0, 0.6);
    width: 400px;
    display: flex;
    flex-direction: column;
    margin: 30px;
    position: relative;
}

@keyframes backgroundFlow {
    0% {
        background-position: 0% 50%;
    }
    50% {
        background-position: 100% 50%;
    }
    100% {
        background-position: 0% 50%;
    }
}

/* H1 Styling */
.gui3 h1 {
    color: #fff;
    text-align: center;
    font-size: 28px;
    margin-bottom: 30px;
    text-shadow: 2px 2px 10px rgba(0, 0, 0, 0.5);
    letter-spacing: 2px;
    animation: glow 1.5s ease-in-out infinite alternate;
}

@keyframes glow {
    from {
        text-shadow: 0 0 10px #ff0099, 0 0 20px #ff0099, 0 0 30px #ff0099, 0 0 40px #ff0099;
    }
    to {
        text-shadow: 0 0 20px #ff00ff, 0 0 30px #ff00ff, 0 0 40px #ff00ff, 0 0 50px #ff00ff;
    }
}

/* Selection Containers */
.selection-container {
    display: flex;
    justify-content: space-between;
    gap: 20px;
}

.selection-item {
    flex: 1;
    display: flex;
    flex-direction: column;
}

.selection-item label {
    color: #fff;
    margin-bottom: 10px;
    font-size: 16px;
}

.selection-item select {
    padding: 12px;
    border-radius: 10px;
    border: none;
    background-color: rgba(255, 255, 255, 0.1);
    color: #fff;
    font-size: 16px;
}

/* Switch Group */
.switch-group {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
    margin-bottom: 20px;
}

.switch-item {
    display: flex;
    flex-direction: column;
    align-items: center;
}

.switch-item input[type='checkbox'] {
    display: none;
}

.switch-item .slider {
    position: relative;
    width: 60px;
    height: 30px;
    background-color: #333;
    border-radius: 50px;
    cursor: pointer;
    transition: background-color 0.4s ease;
}

.switch-item .slider:before {
    content: "";
    position: absolute;
    height: 26px;
    width: 26px;
    left: 2px;
    bottom: 2px;
    background-color: #fff;
    border-radius: 50%;
    transition: 0.4s;
}

input[type='checkbox']:checked + .slider {
    background-color: #ff0099;
}

input[type='checkbox']:checked + .slider:before {
    transform: translateX(30px);
}

.switch-item .switch-label {
    margin-top: 10px;
    color: #fff;
    font-size: 18px;
    text-align: center;
    text-shadow: 1px 1px 5px rgba(0, 0, 0, 0.4);
}

/* Slider Controls */
.slider-controls {
    margin-top: 20px;
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 20px;
}

.control-item {
    display: flex;
    flex-direction: column;
    align-items: center;
}

.control-item label {
    margin-bottom: 10px;
    color: #fff;
    font-size: 14px;
    text-shadow: 1px 1px 5px rgba(0, 0, 0, 0.4);
}

.control-item input[type='range'] {
    -webkit-appearance: none;
    width: 100%;
    height: 8px;
    border-radius: 20px;
    background: #fff;
    outline: none;
}

.control-item input[type='range']::-webkit-slider-thumb {
    -webkit-appearance: none;
    width: 22px;
    height: 22px;
    background: #ff0099;
    border-radius: 50%;
    cursor: pointer;
}

.control-item input[type='range']::-moz-range-thumb {
    width: 22px;
    height: 22px;
    background: #ff0099;
    border-radius: 50%;
    cursor: pointer;
}

.control-item output {
    margin-top: 10px;
    color: #fff;
    font-size: 16px;
    text-shadow: 1px 1px 5px rgba(0, 0, 0, 0.4);
}

/* Tooltip Styling */
.info {
    background: rgba(255, 0, 153, 0.8);
    border-radius: 10px;
    padding: 10px;
    font-size: 12px;
    margin-top: 5px;
    opacity: 0;
    transform: translateY(-10px);
    transition: opacity 0.3s ease, transform 0.3s ease;
    pointer-events: none;
}

.switch-item:hover .info {
    opacity: 1;
    transform: translateY(0);
}

</style>


`);
function updateAimAmount() {
    try {
        AIM;
    } catch (error) {
        return;
    };
    for (const key in AIM) {
        for (const key2 in AIM[key]) {
            if ((AIM[key][key2].toString() == window.prevAimAmount.toString()) || (AIM[key][key2] == 4)) {
                AIM[key][key2] = window.aimAmount;
                prevAimAmount = aimAmount;
            };
        };
    };
};
localStorage['apap'] = localStorage['apap'] || false;
localStorage['papa'] = localStorage['papa'] || JSON.stringify(SelectedTank);
SelectedTank = JSON.parse(localStorage['papa']);
try {
    for (const k in t = Object.entries(Skins?.[Object.entries(SelectedTank.hull)?.[0]?.[0]])) {
        if (t[k][0] !== 'or') {
            var el = document.createElement('option');
            el.textContent = t[k][0];
            el.value = t[k][0];
            Hull.appendChild(el);
        };
    };
    for (const k in t = Object.entries(Skins?.[Object.entries(SelectedTank.turret)?.[0]?.[0]])) {
        if (t[k][0] !== 'or') {
            var el = document.createElement('option');
            el.textContent = t[k][0];
            el.value = t[k][0];
            Turret.appendChild(el);
        };
    };
} catch (error) {};
Hull.value = SelectedTank.hull[Object.entries(SelectedTank.hull)[0][0]];
Turret.value = SelectedTank.turret[Object.entries(SelectedTank.turret)[0][0]];
window.Hack = document.getElementById('speed-check').checked;
window.Aimbot = document.getElementById('aimbot').checked;
window.Speed = 1.13;
window.Acceleration = 1.15;
window.aimAmount = 4;
window.espEnabled = false;
if (localStorage['apap'] == 'true') {
    document.getElementById('skin-check').setAttribute('checked', '');
    var ta = 0;
    var o = fetch;
    var replacements = {};
    try {
        for (const k in t = Skins[Object.entries(SelectedTank.turret)[0][0]][SelectedTank.turret[Object.entries(SelectedTank.turret)[0][0]]]) {
            replacements[Skins[Object.entries(SelectedTank.turret)[0][0]].or[k]] = t[k];
        };
        for (const k in t = Skins[Object.entries(SelectedTank.hull)[0][0]][SelectedTank.hull[Object.entries(SelectedTank.hull)[0][0]]]) {
            replacements[Skins[Object.entries(SelectedTank.hull)[0][0]].or[k]] = t[k];
        };
    } catch (error) {};
    fetch = function() {
        for (let key in replacements) {
            if (arguments[0].includes(key)) {
                ta++;
                arguments[0] = arguments[0].replace(key, replacements[key]);
                if (ta > 5) {
                    console.log('Restoring original fetch function:', o);
                    fetch = o;
                };
            };
        };
        return o.apply(this, arguments);
    };
};

// Get references to the output elements
const speedOutput = document.getElementById('speed-output');
const accelerationOutput = document.getElementById('acceleration-output');
const aimOutput = document.getElementById('aim-output');

// Add event listeners to handle user input
speedOutput.addEventListener('input', function () {
    let value = parseFloat(this.textContent);
    value = Math.max(0, Math.min(100, value));
    document.getElementById('speed').value = value;
    window.Speed = value;
});

accelerationOutput.addEventListener('input', function () {
    let value = parseFloat(this.textContent);
    value = Math.max(0, Math.min(100, value));
    document.getElementById('acceleration').value = value;
    window.Acceleration = value;
});

aimOutput.addEventListener('input', function () {
    let value = parseFloat(this.textContent);
    value = Math.max(0, Math.min(360, value));
    document.getElementById('aim').value = value;
    window.aimAmount = value;
    updateAimAmount();
});

document.getElementById('speed').addEventListener('input', function () {
    speedOutput.textContent = this.value;
    window.Speed = parseFloat(this.value);
});

document.getElementById('acceleration').addEventListener('input', function () {
    accelerationOutput.textContent = this.value;
    window.Acceleration = parseFloat(this.value);
});

document.getElementById('aim').addEventListener('input', function () {
    aimOutput.textContent = this.value;
    window.aimAmount = parseFloat(this.value);
    updateAimAmount();
});

document.getElementById('speed-check').addEventListener('change', function () {
    window.Hack = this.checked;
});

document.getElementById('aimbot').addEventListener('change', function () {
    window.Aimbot = this.checked;
});

document.getElementById('esp-check').addEventListener('change', function () {
    window.espEnabled = this.checked;
});

document.getElementById('skin-check').addEventListener('change', function () {
    localStorage['apap'] = this.checked;
});

Hull.addEventListener('change', () => {
    SelectedTank.hull[User.hull.name.toLowerCase()] = Hull.value;
    localStorage['papa'] = JSON.stringify(SelectedTank);
    for (const k in SelectedTank.turret) {
        if (k !== User.turret.name.toLowerCase()) {
            delete SelectedTank.turret[k];
        };
    };
    for (const k in SelectedTank.hull) {
        if (k !== User.hull.name.toLowerCase()) {
            delete SelectedTank.hull[k];
        };
    };
});

Turret.addEventListener('change', () => {
    SelectedTank.turret[User.turret.name.toLowerCase()] = Turret.value;
    localStorage['papa'] = JSON.stringify(SelectedTank);
    for (const k in SelectedTank.turret) {
        if (k !== User.turret.name.toLowerCase()) {
            delete SelectedTank.turret[k];
        };
    };
    for (const k in SelectedTank.hull) {
        if (k !== User.hull.name.toLowerCase()) {
            delete SelectedTank.hull[k];
        };
    };
});

document.addEventListener('keydown', (e) => {
    if (e.ctrlKey && e.key == 'm') {
        e.preventDefault();
        document.querySelector('.gui2').style.display = document.querySelector('.gui2').style.display == 'block' ? 'none' : 'block';
        document.querySelector('.gui3').style.display = document.querySelector('.gui3').style.display == 'block' ? 'none' : 'block';
    };
});
setInterval(() => {
    updateAimAmount();
}, 2000);
var f, r = true;
function a() {
    if (r) {
        f = requestAnimationFrame(a);
        if (User?.turret?.name) {
            document.querySelector('label[for="Turret"]').textContent = User.turret.name;
            document.querySelector('label[for="Hull"]').textContent = User.hull.name;
            for (const k in SelectedTank.turret) {
                if (k !== User.turret.name.toLowerCase()) {
                    delete SelectedTank.turret[k];
                };
            };
            for (const k in SelectedTank.hull) {
                if (k !== User.hull.name.toLowerCase()) {
                    delete SelectedTank.hull[k];
                };
            };
            SelectedTank.hull[User.hull.name.toLowerCase()] = Hull.value;
            SelectedTank.turret[User.turret.name.toLowerCase()] = Turret.value;
            localStorage['papa'] = JSON.stringify(SelectedTank);
            Hull.innerHTML = '';
            Turret.innerHTML = '';
            try {
                for (const k in t = Object.entries(Skins?.[User.hull.name.toLowerCase()])) {
                    if (t[k][0] !== 'or') {
                        var el = document.createElement('option');
                        el.textContent = t[k][0];
                        el.value = t[k][0];
                        Hull.appendChild(el);
                    };
                };
                for (const k in t = Object.entries(Skins?.[User.turret.name.toLowerCase()])) {
                    if (t[k][0] !== 'or') {
                        var el = document.createElement('option');
                        el.textContent = t[k][0];
                        el.value = t[k][0];
                        Turret.appendChild(el);
                    };
                };
            } catch (error) {};
            localStorage['papa'] = JSON.stringify(SelectedTank);
            cancelAnimationFrame(f);
            r = false;
        };
    };
};
try {
    a();
} catch (error) {
    console.log(error);
    r = false;
    cancelAnimationFrame(f);
};
